!function(a){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return a[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=a,n.c=r,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,a){"use strict";a.r(e);var r='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial,\n    sans-serif',n={dayMode:{axisFontColor:function(t){return"rgba(150, 162, 170, ".concat(t,")")},axisFontsList:r,axisLinesColor:"#ECF0F3",hoverLineColor:"#DFE6EB",bgColor:"#FFFFFF",navOverlayColor:"rgba(242, 247, 249, 0.85)",sliderColor:"rgba(193, 214, 229, 0.7)",tooltipBgColor:"#FFFFFF",tooltipColor:"#222222",tooltipShadow:"0px 1px 3px 0px #b4b2b4"},nightMode:{axisFontColor:function(t){return"rgba(84, 103, 120, ".concat(t,")")},axisFontsList:r,axisLinesColor:"#303e4f",hoverLineColor:"#3b4a5a",bgColor:"#242F3E",navOverlayColor:"rgba(31, 42, 56, 0.85)",sliderColor:"rgba(64, 86, 107, 0.7)",tooltipBgColor:"#253241",tooltipColor:"#FFFFFF",tooltipShadow:"0px 1px 3px 0px #1e2834"}},o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function s(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l=function(){function e(t){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"setup",function(t){o.canvas=document.createElement("canvas"),o.canvas.id=o.name,o.canvas.addEventListener("mousemove",o.onMove),o.canvas.addEventListener("touchmove",o.onMove),(o.name="nav_chart_controls")&&(o.canvas.addEventListener("mousedown",o.onDown),o.canvas.addEventListener("touchstart",o.onDown),o.canvas.addEventListener("mouseup",o.onUp),o.canvas.addEventListener("touchend",o.onUp),o.canvas.addEventListener("mouseleave",o.onLeave)),o.ctx=o.canvas.getContext("2d"),o.container.appendChild(o.canvas),o.controlsDiv=t,o.resize()}),c(this,"resize",function(){var t=window,e=t.innerWidth,a=t.innerHeight;if(!o.is_touch_device()||o.innerWidth!==e){o.innerWidth=window.innerWidth;var r=document.getElementsByClassName("charts-selector")[0].clientHeight,n=Math.round((a-(o.controlsDiv.clientHeight+r+50))*o.ratio);"main_chart"===o.canvas.id&&n<200&&(n=Math.round(.9*a*o.ratio)),"main_chart"!==o.canvas.id&&n<80&&(n=Math.round(.9*a*o.ratio)),o.container.style.width=e+"px",o.container.style.height=n+"px",o.canvas.width=e*o.pixelRatio,o.canvas.height=n*o.pixelRatio,o.chart.startX=Math.round(.05*o.canvas.width),o.chart.endX=Math.round(.95*o.canvas.width),o.chart.endY=Math.round(.13*o.canvas.height),o.chart.startY=Math.round(.83*o.canvas.height),o.chart.width=o.chart.endX-o.chart.startX,o.chart.height=o.chart.startY-o.chart.endY,requestAnimationFrame(function(){return o.update(o.start,o.end)})}}),this.chart={},this.coords={},this.ratio=t.ratio,this.data=t.data,this.name=t.name,this.lineWidth=4,this.start=t.start,this.end=t.end,this.diff=0,this.title=t.title,this.colors=n.dayMode,this.range=(this.end-this.start).toFixed(5),this.sCharts=t.selectedCharts,this.pixelRatio=window.devicePixelRatio||1,this.container=t.container,this.an={animDates:1,animChart:100,animFadeChart:100,fadeInChart:null,fadeOutChart:null}}var t,a,r;return t=e,(a=[{key:"calcAnimations",value:function(){this.maxNum=this.getMaxValue(),this.newMaxValueY=this.getYAxisMaxValue(this.maxNum),this.maxValueY||(this.maxValueY=this.newMaxValueY),Math.round(this.newMaxValueY)!==Math.round(this.maxValueY)&&(100===this.an.animChart&&(this.diff=this.newMaxValueY-this.maxValueY,this.startValue=this.maxValueY,this.prevAxisValue=this.maxValueY,this.newAxisValue=this.newMaxValueY),this.maxValueY=Math.round(this.startValue+this.diff*(100-this.an.animChart)/100),this.an.animChart-=4),this.an.animFadeChart<100&&(this.an.animFadeChart-=4,this.an.animFadeChart<=0&&(this.an.fadeOutChart&&this.sCharts.includes(this.an.fadeOutChart)&&this.sCharts.splice(this.sCharts.indexOf(this.an.fadeOutChart),1),this.an.animFadeChart=100,this.an.fadeInChart=null,this.an.fadeOutChart=null)),this.an.animChart<=0&&(this.an.animChart=100,this.maxValueY=this.newMaxValueY)}},{key:"drawErrorMessage",value:function(){this.ctx.save();var t=2*Math.round(14*+this.pixelRatio);this.ctx.font="300 ".concat(t,"px ").concat(this.colors.axisFontsList),this.ctx.fillStyle=this.colors.axisFontColor(1),this.ctx.textAlign="center";var e=Math.round(this.chart.startX+this.chart.width/2),a=Math.round(this.chart.height/2);this.ctx.fillText("No charts selected :(",e,a),this.ctx.restore()}},{key:"calcChartData",value:function(t,e,a){var n=this,o=this.chart,i=[];if(this.spaceBetween){var r=o.startX/this.spaceBetween/100,s=(r-e)/r,h=(r-(1-a))/r;this.startX=r<=e?0:Math.round(o.startX*s),this.endX=a<=1-r?this.canvas.width:Math.round(o.endX+o.startX*(1-h))}else this.startX=o.startX,this.endX=o.endX;var c=t.length;this.firstItemId=Math.floor(e*c);var l=1/c;this.startFraction=1-(e-l*this.firstItemId)/l;var u=t[this.firstItemId],d=u+(t[this.firstItemId+1]-u)*(1-this.startFraction);this.lastItemId=Math.ceil(a*c);var f=1-(l*this.lastItemId-a)/l,p=t.slice(this.firstItemId,this.lastItemId),v=p.length-1,m=p[v]+(p[v-1]-p[v])*(1-f);this.spaceBetween=(this.endX-this.startX)/(p.length-3+this.startFraction+f);var y=Math.round(o.startY-d/this.maxValueY*o.height),b=Math.round(this.startX),x=Math.round(o.startY-m/this.maxValueY*o.height),w=Math.round(this.endX);return p.map(function(t,e){var a=Math.round(o.startY-t/n.maxValueY*o.height),r=Math.round(n.startX+(e-1+n.startFraction)*n.spaceBetween);i.push({x:r,y:a})}),i[0]={x:b,y:y},i[v]={x:w,y:x},i}},{key:"drawChart",value:function(t,e,a){var n=this,r=this.chart;this.ctx.save(),e===this.an.fadeOutChart&&this.an.animFadeChart&&(this.ctx.globalAlpha=(this.an.animFadeChart/100).toFixed(3)),e===this.an.fadeInChart&&this.an.animFadeChart&&(this.ctx.globalAlpha=1-(this.an.animFadeChart/100).toFixed(3)),this.ctx.beginPath(),this.ctx.moveTo(r.startX,r.startY),t.map(function(t,e){var a=t.x,r=t.y;0===e?n.ctx.moveTo(a,r):n.ctx.lineTo(a,r)},0),this.ctx.lineCap="round",this.ctx.strokeStyle=a,this.ctx.lineWidth=this.lineWidth,this.ctx.stroke(),this.ctx.restore()}},{key:"updateSelectedCharts",value:function(t,e){var a=this;this.an.fadeInChart=null,this.an.fadeOutChart=null,this.hoverItem=null,t&&!this.sCharts.includes(e)&&(this.an.fadeInChart=e,this.an.animFadeChart-=1,this.sCharts.push(this.an.fadeInChart)),!t&&this.sCharts.includes(e)&&(this.an.fadeOutChart=e,this.an.animFadeChart-=1),requestAnimationFrame(function(){return a.update(a.start,a.end)})}},{key:"getMaxValue",value:function(){var e=this,t=s(this.sCharts);return this.an.fadeOutChart&&t.includes(this.an.fadeOutChart)&&t.splice(t.indexOf(this.an.fadeOutChart),1),this.an.fadeInChart&&!t.includes(this.an.fadeInChart)&&t.push(this.an.fadeInChart),Math.max.apply(Math,s(t.map(function(t){return Math.max.apply(Math,s(e.data.columns[t].slice(e.firstItemId,e.lastItemId)))})))}},{key:"getYAxisMaxValue",value:function(t){var e=Math.max(10,Math.pow(10,t.toString().length-1)),a=Math.ceil(t/e)*e;return Math.max(a,Math.round(t/e)*e)}},{key:"findClosestItem",value:function(e,t){return t.map(function(t){return Math.abs(t.x-e)}).reduce(function(t,e,a,r){return e<r[t]?a:t},0)}},{key:"switchNightMode",value:function(t){var e=this;if(this.colors=t?n.nightMode:n.dayMode,this.tooltip){var a=this.tooltip.style,r=this.colors;a.backgroundColor=r.tooltipBgColor,a.color=r.tooltipColor,a.mozBoxShadow=r.tooltipShadow,a.webkitBoxShadow=r.tooltipShadow,a.boxShadow=r.tooltipShadow}requestAnimationFrame(function(){return e.update(e.start,e.end)})}},{key:"is_touch_device",value:function(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}}}])&&h(t.prototype,a),r&&h(t,r),e}();function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var y=function(t){function r(t){var s,e,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),e=this,a=f(r).call(this,t),m(p(s=!a||"object"!==u(a)&&"function"!=typeof a?p(e):a),"update",function(e,a){s.ctx.clearRect(0,0,s.canvas.width,s.canvas.height);var t=(a-e).toFixed(5);if(s.start=e,s.end=a,s.dates||(s.dates=s.updateDatesObject(e,a,s.allDates)),t!==s.range&&(s.updateDatesObject(e,a,s.dates),s.range=t),Object.keys(s.dates).length===Object.keys(s.newDates).length||s.prevDates||(s.prevDates=s.dates,s.dates=s.newDates),s.calcAnimations(),s.drawMainAxis(),!s.sCharts.length)return s.hideTooltip(),void s.drawErrorMessage();s.an.animChart<100?(s.drawYAxis("fadeOut"),s.drawYAxis("fadeIn")):s.drawYAxis(),null!==s.hoverItem&&s.sCharts.length&&s.drawHoverGrid(s.coords[s.sCharts[0]][s.hoverItem].x),s.sCharts.map(function(t){s.coords[t]=s.calcChartData(s.data.columns[t],e,a),s.drawChart(s.coords[t],t,s.data.colors[t]),null!==s.hoverItem?(s.drawHoverPoint(s.coords[t][s.hoverItem],s.data.colors[t]),s.showTooltip()):s.hideTooltip()}),!s.prevDates&&s.drawDatesLine(s.dates,1),s.prevDates&&(s.animation=Object.keys(s.prevDates).length>Object.keys(s.dates).length?"fadeOut":"fadeIn","fadeOut"===s.animation&&(s.drawDatesLine(s.dates,1),s.drawDatesLine(s.prevDates,s.an.animDates)),"fadeIn"===s.animation&&(s.drawDatesLine(s.dates,1-s.an.animDates),s.drawDatesLine(s.prevDates,1)),s.an.animDates=(s.an.animDates-.02).toFixed(3),requestAnimationFrame(function(){return s.update(s.start,s.end)}),s.an.animDates<=0&&(s.an.animDates=1,s.prevDates=null,s.animation=null)),(s.an.animFadeChart<100||s.an.animChart<100)&&setTimeout(requestAnimationFrame(function(){return s.update(s.start,s.end)}),16)}),m(p(s),"onMove",function(t){var e=t.touches?t.touches[0].pageX:t.x,a=t.touches?t.touches[0].pageY:t.y,r=p(s).chart,n=s.canvas.getBoundingClientRect(),o=(e-Math.round(n.left))*s.pixelRatio,i=(a-Math.round(n.top))*s.pixelRatio;s.sCharts.length&&i<r.startY&&i>r.endY&&o>r.startX&&o<r.endX&&(s.hoverItem=s.findClosestItem(o,s.coords[s.sCharts[0]]),requestAnimationFrame(function(){return s.update(s.start,s.end)}))}),m(p(s),"onNavChange",function(t,e){s.hoverItem=null,requestAnimationFrame(function(){return s.update(t,e)})}),m(p(s),"createDatesObject",function(t){var r={};return t.map(function(t,e){var a=new Date(t);r[e]=i[a.getMonth()]+" "+a.getDate()}),r}),s.hoverItem=null,s.datesNum=6,s.newDates={},s.prevDates={},s.nthDate=0,s.allDates=s.createDatesObject(t.data.columns.x),s.itemsNum=s.allDates.length,s.updateDatesObject(s.start,s.end,s.allDates),s.createTooltip(),s}var e,a,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(r,l),e=r,(a=[{key:"drawMainAxis",value:function(){var t=this.ctx,e=this.chart;t.lineWidth=2,t.beginPath(),t.moveTo(e.startX,e.startY),t.lineTo(e.endX,e.startY),t.strokeStyle=this.colors.axisLinesColor,t.stroke()}},{key:"drawDatesLine",value:function(r,t){var n=this,o=this.ctx,e=this.colors;o.save();var i=Math.round(14*+this.pixelRatio);o.font="300 ".concat(i,"px ").concat(e.axisFontsList),o.fillStyle=e.axisFontColor(t);var s=this.firstItemId-1;this.coords[this.sCharts[0]].map(function(t,e){if(r[++s]){var a=Math.round(n.startX-35+(e-1+n.startFraction)*n.spaceBetween);o.fillText(r[s],a,n.chart.startY+1.5*i)}}),o.restore()}},{key:"drawYAxis",value:function(t){var e,a,r,n=this.ctx,o=this.chart,i=this.colors,s=this.an,h=Math.round(14*+this.pixelRatio);if(n.lineWidth=1,n.font="300 ".concat(h,"px ").concat(i.axisFontsList),n.strokeStyle=i.axisLinesColor,s.animChart<100){var c=this.newMaxValueY>this.maxValueY?1:-1;"fadeOut"===t&&(e=o.startY+c*(1-s.animChart/100)*o.height*.5,a=this.prevAxisValue,r=s.animChart/100),"fadeIn"===t&&(e=o.startY-c*(s.animChart/100)*o.height*.5,r=1-s.animChart/100,a=this.newAxisValue)}else e=o.startY,a=this.maxValueY,r=1;n.fillStyle=i.axisFontColor(r);for(var l=1;l<=5;l++){var u=e-l*o.height/5,d=a*l/5;n.fillText(this.generateYAxisLabel(d),this.chart.startX,u-.5*h),n.beginPath(),n.moveTo(o.startX,u),n.lineTo(o.endX,u),n.stroke()}n.fillText(0,o.startX,o.startY-.5*h)}},{key:"drawHoverPoint",value:function(t,e){var a=this.ctx,r=t.x,n=t.y;a.beginPath(),a.strokeStyle=e,a.lineWidth=4,a.moveTo(r,n),a.arc(r,n,8,0,2*Math.PI,!1),a.stroke(),a.beginPath(),a.lineWidth=1,a.fillStyle=this.colors.bgColor,a.arc(r,n,6,0,2*Math.PI,!1),a.fill()}},{key:"drawHoverGrid",value:function(t){var e=this.ctx,a=this.chart;e.lineWidth=1,e.strokeStyle=this.colors.hoverLineColor,e.beginPath(),e.moveTo(t,a.startY),e.lineTo(t,a.endY),e.stroke()}},{key:"createTooltip",value:function(){this.tooltip=b("div"),this.tooltipDate=b("div"),this.tooltipInfo=b("div"),this.tooltip.className="tooltip",this.tooltipDate.className="tooltip-date",this.tooltipInfo.className="tooltip-info",x(this.tooltip,this.tooltipDate),x(this.tooltip,this.tooltipInfo);var t=this.tooltip.style;t.backgroundColor=this.colors.tooltipBgColor,t.color=this.colors.tooltipColor,t.display="none",t.mozBoxShadow=this.colors.tooltipShadow,t.webkitBoxShadow=this.colors.tooltipShadow,t.boxShadow=this.colors.tooltipShadow,x(this.container,this.tooltip)}},{key:"showTooltip",value:function(){var s=this,h=this.hoverItem+this.firstItemId,t=Math.round(this.startX-60+(this.hoverItem-1+this.startFraction)*this.spaceBetween/this.pixelRatio),e=o[new Date(this.data.columns.x[h]).getDay()]+", "+this.allDates[h];this.tooltipDate.innerHTML=e,this.tooltipInfo.innerHTML="",this.sCharts.map(function(t){var e=s.data.columns[t][h],a=s.data.names[t],r=s.data.colors[t],n=b("div");n.style.color=r;var o=b("div");o.className="num",o.innerHTML=e;var i=b("div");i.className="label",i.innerHTML=a,x(n,o),x(n,i),x(s.tooltipInfo,n)}),this.tooltip.style.display="block",this.tooltip.style.left="".concat(t,"px")}},{key:"hideTooltip",value:function(){this.tooltip.style.display="none"}},{key:"makeDatesObject",value:function(t,e){var a={};for(var r in t)+r%Math.pow(2,e)||(a[r]=t[r]);return a}},{key:"updateDatesObject",value:function(t,e,a){for(var r=(e-t).toFixed(5),n=this.datesNum,o=Math.ceil(Object.keys(a).length*r);n+1<=o||o<n-2;)n+1<=o&&(this.nthDate+=1),o<n-2&&(this.nthDate-=1),this.newDates=this.makeDatesObject(this.allDates,this.nthDate),o=Math.ceil(Object.keys(this.newDates).length*r);this.dates||(this.dates=this.newDates)}},{key:"generateYAxisLabel",value:function(t){return t>Math.pow(10,6)?t/Math.pow(10,6)+"M":t>Math.pow(10,3)?t/Math.pow(10,3)+"K":t}}])&&d(e.prototype,a),n&&d(e,n),r}(),b=function(t){return document.createElement(t)},x=function(t,e){return t.appendChild(e)},O=y;function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var F=function(t){function s(t){var e,a,r,n,o,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),a=this,r=C(s).call(this,t),e=!r||"object"!==w(r)&&"function"!=typeof r?g(a):r,n=g(e),i=function(){e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.calcAnimations(),e.sCharts.map(function(t){e.coords=e.calcChartData(e.data.columns[t],e.start,e.end),e.drawChart(e.coords,t,e.data.colors[t])}),(e.an.animFadeChart<100||e.an.animChart<100)&&requestAnimationFrame(function(){return e.update(e.start,e.end)})},(o="update")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,e.lineWidth=3,e.start=0,e.end=1,e.diff=0,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(s,l),s}();function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Y(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var I=function(t){function r(t){var o,e,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),e=this,a=D(r).call(this,t),Y(k(o=!a||"object"!==P(a)&&"function"!=typeof a?k(e):a),"update",function(){o.rect=o.canvas.getBoundingClientRect(),o.startX=o.chart.startX,o.startY=o.chart.startY,o.endX=o.chart.endX,o.endY=o.chart.endY,o.startPos=o.startBarPos*o.chart.width,o.endPos=o.endBarPos*o.chart.width,o.ctx.clearRect(0,0,o.canvas.width,o.canvas.height),o.drawNavOverlay(),o.controlledChart.onNavChange(o.startBarPos,o.endBarPos)}),Y(k(o),"handleMultiTouch",function(t){var e=t.touches[0].pageX<t.touches[1].pageX?(t.touches[0].pageX-o.rect.left-o.chart.startX)/o.chart.width:(t.touches[1].pageX-o.rect.left-o.chart.startX)/o.chart.width,a=t.touches[0].pageX<t.touches[1].pageX?(t.touches[1].pageX-o.rect.left-o.chart.startX)/o.chart.width:(t.touches[0].pageX-o.rect.left-o.chart.startX)/o.chart.width;e<0||1<e||e>o.endBarPos-o.minBarSize||a<0||1<a||a<o.startBarPos+o.minBarSize||(o.startBarPos=e,o.endBarPos=a,requestAnimationFrame(function(){return o.update()}))}),Y(k(o),"onMove",function(t){t.preventDefault(),o.multiTouch&&o.handleMultiTouch(t);var e=t.touches?t.touches[0].pageX:t.x,a=t.touches?t.touches[0].pageY:t.y;if(o.m.x=e-o.chart.startX,o.m.y=a+o.rect.top+o.endY-o.chart.startY,o.isHover(o.m.x),o.m.click){var r=o.m.x/o.chart.width;switch(o.m.click){case"startBarPos":if(r<0||1<r||r>o.endBarPos-o.minBarSize)return;r<.01&&(o.startBarPos=0),o.startBarPos=r;break;case"endBarPos":if(r<0||1<r||r<o.startBarPos+o.minBarSize)return;.99<r&&(o.endBarPos=1),o.endBarPos=r;break;case"centerBarPos":var n=o.centerClickOffsetX-r;if(o.startBarPos-n<0||1<o.endBarPos-n)return;o.startBarPos-=n,o.endBarPos-=n,o.centerClickOffsetX=r}requestAnimationFrame(function(){return o.update()})}}),Y(k(o),"onDown",function(t){if(t.preventDefault(),t.touches&&2===t.touches.length)o.multiTouch=!0;else{var e=t.touches?t.touches[0].pageX:t.x;o.m.x=e-o.rect.left-o.chart.startX,o.isHover(o.m.x),o.m.hover&&(o.m.click=o.m.hover,"centerBarPos"===o.m.hover&&(o.centerClickOffsetX=o.m.x/o.chart.width))}}),Y(k(o),"onUp",function(t){t.preventDefault(),o.m.click=!1,o.multiTouch=!1}),Y(k(o),"onLeave",function(){document.body.style.cursor="auto",o.m.click=!1,o.m.hover=!1}),o.controlledChart=t.controlledChart,o.startBarPos=t.start,o.endBarPos=t.end,o.barWidth=6,o.m={x:void 0,y:void 0,hover:null,click:null},o.multiTouch=!1,o.minBarSize=.1,o.pixelRatio=1,o}var e,a,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&X(t,e)}(r,l),e=r,(a=[{key:"drawNavOverlay",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var t=this.startBarPos*this.chart.width+this.startX,e=this.endBarPos*this.chart.width+this.chart.startX;this.drawOverlay(Math.round(t),Math.round(e)),this.drawSlider(Math.round(t),Math.round(e))}},{key:"drawSlider",value:function(t,e){this.ctx.fillStyle=this.colors.sliderColor,this.ctx.fillRect(t,0,this.barWidth,this.startY),this.ctx.fillRect(e-2,0,this.barWidth,this.startY),this.ctx.fillRect(t+this.barWidth,0,e-t-this.barWidth-2,2),this.ctx.fillRect(t+this.barWidth,this.startY,e-t-this.barWidth-2,-2)}},{key:"drawOverlay",value:function(t,e){this.ctx.fillStyle=this.colors.navOverlayColor,this.ctx.fillRect(this.startX-1,0,t-this.startX+1,this.startY),this.ctx.fillRect(e+2,0,this.endX-e,this.startY)}},{key:"isHover",value:function(t){return this.m.y<0&&this.m.y>this.startY?(this.m.hover&&(document.body.style.cursor="auto"),this.m.hover=null,!1):0<t&&t<this.startPos-7&&t>this.endPos+this.barWidth+10&&t<this.endX?(this.m.hover="outOfSlidebar",document.body.style.cursor="col-resize",!0):t>this.startPos-7&&t<this.startPos+this.barWidth+10?(this.m.hover="startBarPos",document.body.style.cursor="col-resize",!0):t>this.endPos-7&&t<this.endPos+this.barWidth+10?(this.m.hover="endBarPos",document.body.style.cursor="col-resize",!0):t>=this.startPos+this.barWidth+10&&t<=this.endPos-7?(this.m.hover="centerBarPos",document.body.style.cursor="all-scroll",!0):(document.body.style.cursor="auto",this.m.hover=!1)}}])&&S(e.prototype,a),n&&S(e,n),r}();var j=function(t){return document.createElement(t)},T=function(t,e){return t.appendChild(e)},B=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=e.data,a=e.appContainer,r=e.title||"Chart",n=i.names,o=e.start||.55,s=e.end||.9,h=!1,c=j("div");c.id=r;var l=j("h2");l.innerHTML=r;var u=j("div");u.id="main_chart_container";var d=j("div");d.id="nav_chart_container",T(c,l),T(c,u),T(c,d);var f=j("div");f.id="controls",f.style.borderColor="#e6ecf0";var p=[];for(var v in n){var m=y(v);T(f,m)}function y(t){var e=j("div"),a=j("input");a.addEventListener("change",M),a.type="checkbox",a.id=t,a.checked="true";var r=document.createTextNode(i.names[t]),n=j("label");n.htmlFor=t;var o=j("span");return o.style.borderColor=i.colors[t],j("i").innerHTML=t,T(n,o),T(n,r),T(e,a),T(e,n),p.push(t),e}T(c,f);var b=j("div"),x=j("button");b.className="nightmode_switch",x.className="nightmode_button",x.innerHTML="Switch to Night Mode",x.addEventListener("click",function(t){t.preventDefault();var e=(h=!h)?"Switch to Day Mode":"Switch to Night Mode",a=h?"#344658":"#e6ecf0",r=h?"#242F3E":"#FFFFFF",n=h?"#FFFFFF":"#222222";x.innerHTML=e,document.body.style.backgroundColor=r,document.body.style.color=n,f.style.borderColor=a,w.switchNightMode(h),g.switchNightMode(h)}),T(b,x),T(c,b);var w=new O({name:"main_chart",container:u,appContainer:c,title:r,data:i,start:o,end:s,selectedCharts:p,ratio:.65}),C=new F({name:"nav_chart",container:d,appContainer:c,title:r,data:i,selectedCharts:p,ratio:.15}),g=new I({name:"nav_chart_controls",container:d,appContainer:c,title:r,data:[],selectedCharts:p,start:o,end:s,ratio:.15,controlledChart:w});function M(t){var e=t.target,a=e.checked,r=e.id;w.updateSelectedCharts(a,r),C.updateSelectedCharts(a,r)}T(a,c),w.setup(f),C.setup(f),g.setup(f),window.addEventListener("resize",function(){w.resize(),g.resize(),C.resize()})};var _,L=document.getElementById("app");function E(t){var e=+t.target.value;if(-1!==e){for(;L.firstChild;)L.removeChild(L.firstChild);document.body.style.backgroundColor="#FFFFFF",document.body.style.color="#222222",new B({title:"Chart #"+(e+1),data:_[e],appContainer:L})}}window.addEventListener("DOMContentLoaded",function(){var e=new XMLHttpRequest;e.overrideMimeType("application/json"),e.open("GET","./chart_data.json",!0),e.onload=function(){var t;t=JSON.parse(e.responseText),function(t){var e=A("div");e.className="charts-selector";var r=A("select");r.addEventListener("change",E);var a=A("option");a.value=-1,a.innerHTML="Select chart...",V(r,a),t.map(function(t,e){var a=A("option");a.value=e,a.innerHTML="Chart #"+(e+1),V(r,a)}),V(e,r),document.body.prepend(e)}(_=t.map(function(t){var e=function(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},e=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),e.forEach(function(t){var e,a,r;e=n,r=o[a=t],a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r})}return n}({},t,{columns:{}}),a=!0,r=!1,n=void 0;try{for(var o,i=t.columns[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var s=o.value,h=s[0];s.shift(),e.columns[h]=s}}catch(t){r=!0,n=t}finally{try{a||null==i.return||i.return()}finally{if(r)throw n}}return e})),new B({title:"Chart #1",data:_[0],appContainer:L})},e.send()});var A=function(t){return document.createElement(t)},V=function(t,e){return t.appendChild(e)}}]);