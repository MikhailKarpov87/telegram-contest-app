!function(a){var r={};function __webpack_require__(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return a[t].call(e.exports,e,e.exports,__webpack_require__),e.l=!0,e.exports}__webpack_require__.m=a,__webpack_require__.c=r,__webpack_require__.d=function(t,e,a){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(__webpack_require__.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)__webpack_require__.d(a,r,function(t){return e[t]}.bind(null,r));return a},__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(t,e,a){"use strict";a.r(e);var r='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial,\n    sans-serif',n={dayMode:{axisFontColor:function(t){return"rgba(150, 162, 170, ".concat(t,")")},axisFontsList:r,axisLinesColor:"#ECF0F3",hoverLineColor:"#DFE6EB",bgColor:"#FFFFFF",navOverlayColor:"rgba(242, 247, 249, 0.85)",sliderColor:"rgba(193, 214, 229, 0.7)",tooltipBgColor:"#FFFFFF",tooltipColor:"#222222",tooltipShadow:"0px 1px 3px 0px #b4b2b4"},nightMode:{axisFontColor:function(t){return"rgba(84, 103, 120, ".concat(t,")")},axisFontsList:r,axisLinesColor:"#303e4f",hoverLineColor:"#3b4a5a",bgColor:"#242F3E",navOverlayColor:"rgba(31, 42, 56, 0.85)",sliderColor:"rgba(64, 86, 107, 0.7)",tooltipBgColor:"#253241",tooltipColor:"#FFFFFF",tooltipShadow:"0px 1px 3px 0px #1e2834"}},i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function _toConsumableArray(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var s=function(){function Chart(t){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Chart),_defineProperty(this,"setup",function(t){i.canvas=document.createElement("canvas"),i.canvas.id=i.name,i.canvas.addEventListener("mousemove",i.onMove),i.canvas.addEventListener("touchmove",i.onMove),(i.name="nav_chart_controls")&&(i.canvas.addEventListener("mousedown",i.onDown),i.canvas.addEventListener("touchstart",i.onDown),i.canvas.addEventListener("mouseup",i.onUp),i.canvas.addEventListener("touchend",i.onUp),i.canvas.addEventListener("mouseleave",i.onLeave)),i.ctx=i.canvas.getContext("2d"),i.container.appendChild(i.canvas),i.controlsDiv=t,i.resize()}),_defineProperty(this,"resize",function(){var t=window,e=t.innerWidth,a=t.innerHeight,r=document.getElementsByClassName("charts-selector")[0].clientHeight,n=Math.round((a-(i.controlsDiv.clientHeight+r+50))*i.ratio);"main_chart"===i.canvas.id&&n<200&&(n=Math.round(.9*a*i.ratio)),"main_chart"!==i.canvas.id&&n<80&&(n=Math.round(.9*a*i.ratio)),i.container.style.width=e+"px",i.container.style.height=n+"px",i.canvas.width=e*i.pixelRatio,i.canvas.height=n*i.pixelRatio,i.chart.startX=Math.round(.05*i.canvas.width),i.chart.endX=Math.round(.95*i.canvas.width),i.chart.endY=Math.round(.13*i.canvas.height),i.chart.startY=Math.round(.83*i.canvas.height),i.chart.width=i.chart.endX-i.chart.startX,i.chart.height=i.chart.startY-i.chart.endY,requestAnimationFrame(function(){return i.update(i.start,i.end)})}),this.chart={},this.coords={},this.ratio=t.ratio,this.data=t.data,this.name=t.name,this.lineWidth=4,this.start=t.start,this.end=t.end,this.diff=0,this.title=t.title,this.colors=n.dayMode,this.range=(this.end-this.start).toFixed(5),this.sCharts=t.selectedCharts,this.pixelRatio=window.devicePixelRatio||1,this.container=t.container,this.an={animDates:1,animChart:100,animFadeChart:100,fadeInChart:null,fadeOutChart:null}}var t,e,a;return t=Chart,(e=[{key:"calcAnimations",value:function(){this.maxNum=this.getMaxValue(),this.newMaxValueY=this.getYAxisMaxValue(this.maxNum),this.maxValueY||(this.maxValueY=this.newMaxValueY),Math.round(this.newMaxValueY)!==Math.round(this.maxValueY)&&(100===this.an.animChart&&(this.diff=this.newMaxValueY-this.maxValueY,this.startValue=this.maxValueY,this.prevAxisValue=this.maxValueY,this.newAxisValue=this.newMaxValueY),this.maxValueY=Math.round(this.startValue+this.diff*(100-this.an.animChart)/100),this.an.animChart-=5),this.an.animFadeChart<100&&(this.an.animFadeChart-=5,this.an.animFadeChart<=0&&(this.an.fadeOutChart&&this.sCharts.includes(this.an.fadeOutChart)&&this.sCharts.splice(this.sCharts.indexOf(this.an.fadeOutChart),1),this.an.animFadeChart=100,this.an.fadeInChart=null,this.an.fadeOutChart=null)),this.an.animChart<=0&&(this.an.animChart=100,this.maxValueY=this.newMaxValueY)}},{key:"drawErrorMessage",value:function(){this.ctx.save();var t=2*Math.round(14*+this.pixelRatio);this.ctx.font="300 ".concat(t,"px ").concat(this.colors.axisFontsList),this.ctx.fillStyle=this.colors.axisFontColor(1),this.ctx.textAlign="center";var e=Math.round(this.chart.startX+this.chart.width/2),a=Math.round(this.chart.height/2);this.ctx.fillText("No charts selected :(",e,a),this.ctx.restore()}},{key:"calcChartData",value:function(t,e,a){var n=this,i=this.chart,o=[];if(this.spaceBetween){var r=i.startX/this.spaceBetween/100,s=(r-e)/r,h=(r-(1-a))/r;this.startX=r<=e?0:Math.round(i.startX*s),this.endX=a<=1-r?this.canvas.width:Math.round(i.endX+i.startX*(1-h))}else this.startX=i.startX,this.endX=i.endX;var c=t.length;this.firstItemId=Math.floor(e*c);var l=1/c;this.startFraction=1-(e-l*this.firstItemId)/l;var u=t[this.firstItemId],d=u+(t[this.firstItemId+1]-u)*(1-this.startFraction);this.lastItemId=Math.ceil(a*c);var p=1-(l*this.lastItemId-a)/l,f=t.slice(this.firstItemId,this.lastItemId),v=f.length-1,m=f[v]+(f[v-1]-f[v])*(1-p);this.spaceBetween=(this.endX-this.startX)/(f.length-3+this.startFraction+p);var y=Math.round(i.startY-d/this.maxValueY*i.height),_=Math.round(this.startX),b=Math.round(i.startY-m/this.maxValueY*i.height),C=Math.round(this.endX);return f.map(function(t,e){var a=Math.round(i.startY-t/n.maxValueY*i.height),r=Math.round(n.startX+(e-1+n.startFraction)*n.spaceBetween);o.push({x:r,y:a})}),o[0]={x:_,y:y},o[v]={x:C,y:b},o}},{key:"drawChart",value:function(t,e,a){var n=this,r=this.chart;this.ctx.save(),e===this.an.fadeOutChart&&this.an.animFadeChart&&(this.ctx.globalAlpha=(this.an.animFadeChart/100).toFixed(3)),e===this.an.fadeInChart&&this.an.animFadeChart&&(this.ctx.globalAlpha=1-(this.an.animFadeChart/100).toFixed(3)),this.ctx.beginPath(),this.ctx.moveTo(r.startX,r.startY),t.map(function(t,e){var a=t.x,r=t.y;0===e?n.ctx.moveTo(a,r):n.ctx.lineTo(a,r)},0),this.ctx.lineCap="round",this.ctx.strokeStyle=a,this.ctx.lineWidth=this.lineWidth,this.ctx.stroke(),this.ctx.restore()}},{key:"updateSelectedCharts",value:function(t,e){var a=this;this.an.fadeInChart=null,this.an.fadeOutChart=null,this.hoverItem=null,t&&!this.sCharts.includes(e)&&(this.an.fadeInChart=e,this.an.animFadeChart-=1,this.sCharts.push(this.an.fadeInChart)),!t&&this.sCharts.includes(e)&&(this.an.fadeOutChart=e,this.an.animFadeChart-=1),requestAnimationFrame(function(){return a.update(a.start,a.end)})}},{key:"getMaxValue",value:function(){var e=this,t=_toConsumableArray(this.sCharts);return this.an.fadeOutChart&&t.includes(this.an.fadeOutChart)&&t.splice(t.indexOf(this.an.fadeOutChart),1),this.an.fadeInChart&&!t.includes(this.an.fadeInChart)&&t.push(this.an.fadeInChart),Math.max.apply(Math,_toConsumableArray(t.map(function(t){return Math.max.apply(Math,_toConsumableArray(e.data.columns[t].slice(e.firstItemId,e.lastItemId)))})))}},{key:"getYAxisMaxValue",value:function(t){var e=Math.max(10,Math.pow(10,t.toString().length-1)),a=Math.ceil(t/e)*e;return Math.max(a,Math.round(t/e)*e)}},{key:"findClosestItem",value:function(e,t){return t.map(function(t){return Math.abs(t.x-e)}).reduce(function(t,e,a,r){return e<r[t]?a:t},0)}},{key:"switchNightMode",value:function(t){var e=this;this.colors=t?n.nightMode:n.dayMode,this.tooltip&&(this.tooltip.style.backgroundColor=this.colors.tooltipBgColor,this.tooltip.style.color=this.colors.tooltipColor,this.tooltip.style.mozBoxShadow=this.colors.tooltipShadow,this.tooltip.style.webkitBoxShadow=this.colors.tooltipShadow,this.tooltip.style.boxShadow=this.colors.tooltipShadow),requestAnimationFrame(function(){return e.update(e.start,e.end)})}}])&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),Chart}();function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function main_chart_defineProperties(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function main_chart_defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var w=function(t){function MainChart(t){var s,e,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MainChart),e=this,a=_getPrototypeOf(MainChart).call(this,t),main_chart_defineProperty(_assertThisInitialized(s=!a||"object"!==_typeof(a)&&"function"!=typeof a?_assertThisInitialized(e):a),"update",function(e,a){s.ctx.clearRect(0,0,s.canvas.width,s.canvas.height);var t=(a-e).toFixed(5);if(s.start=e,s.end=a,s.dates||(s.dates=s.updateDatesObject(e,a,s.allDates)),t!==s.range&&(s.updateDatesObject(e,a,s.dates),s.range=t),Object.keys(s.dates).length===Object.keys(s.newDates).length||s.prevDates||(s.prevDates=s.dates,s.dates=s.newDates),s.calcAnimations(),s.drawMainAxis(),!s.sCharts.length)return s.hideTooltip(),void s.drawErrorMessage();s.an.animChart<100?(s.drawYAxis("fadeOut"),s.drawYAxis("fadeIn")):s.drawYAxis(),s.sCharts.map(function(t){s.coords[t]=s.calcChartData(s.data.columns[t],e,a),null!==s.hoverItem&&s.drawHoverGrid(s.coords[t][s.hoverItem].x),s.drawChart(s.coords[t],t,s.data.colors[t]),null!==s.hoverItem?(s.drawHoverPoint(s.coords[t][s.hoverItem],s.data.colors[t]),s.showTooltip()):s.hideTooltip()}),!s.prevDates&&s.drawDatesLine(s.dates,1),s.prevDates&&(s.animation=Object.keys(s.prevDates).length>Object.keys(s.dates).length?"fadeOut":"fadeIn","fadeOut"===s.animation&&(s.drawDatesLine(s.dates,1),s.drawDatesLine(s.prevDates,s.an.animDates)),"fadeIn"===s.animation&&(s.drawDatesLine(s.dates,1-s.an.animDates),s.drawDatesLine(s.prevDates,1)),s.an.animDates=(s.an.animDates-.02).toFixed(3),requestAnimationFrame(function(){return s.update(s.start,s.end)}),s.an.animDates<=0&&(s.an.animDates=1,s.prevDates=null,s.animation=null)),(s.an.animFadeChart<100||s.an.animChart<100)&&setTimeout(requestAnimationFrame(function(){return s.update(s.start,s.end)}),16)}),main_chart_defineProperty(_assertThisInitialized(s),"onMove",function(t){var e=t.touches?t.touches[0].pageX:t.x,a=t.touches?t.touches[0].pageY:t.y,r=_assertThisInitialized(s).chart,n=s.canvas.getBoundingClientRect(),i=(e-Math.round(n.left))*s.pixelRatio,o=(a-Math.round(n.top))*s.pixelRatio;s.sCharts.length&&o<r.startY&&o>r.endY&&i>r.startX&&i<r.endX&&(s.hoverItem=s.findClosestItem(i,s.coords[s.sCharts[0]]),requestAnimationFrame(function(){return s.update(s.start,s.end)}))}),main_chart_defineProperty(_assertThisInitialized(s),"onNavChange",function(t,e){s.hoverItem=null,requestAnimationFrame(function(){return s.update(t,e)})}),main_chart_defineProperty(_assertThisInitialized(s),"createDatesObject",function(t){var r={};return t.map(function(t,e){var a=new Date(t);r[e]=i[a.getMonth()]+" "+a.getDate()}),r}),s.hoverItem=null,s.dateItemsToShow=6,s.newDates={},s.prevDates={},s.nthDate=0,s.allDates=s.createDatesObject(t.data.columns.x),s.itemsNum=s.allDates.length,s.updateDatesObject(s.start,s.end,s.allDates),s.createTooltip(),s.perfTest=0,s}var e,a,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}(MainChart,s),e=MainChart,(a=[{key:"drawMainAxis",value:function(){this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.moveTo(this.chart.startX,this.chart.startY),this.ctx.lineTo(this.chart.endX,this.chart.startY),this.ctx.strokeStyle=this.colors.axisLinesColor,this.ctx.stroke()}},{key:"drawDatesLine",value:function(r,t){var n=this;this.ctx.save();var i=Math.round(14*+this.pixelRatio);this.ctx.font="300 ".concat(i,"px ").concat(this.colors.axisFontsList),this.ctx.fillStyle=this.colors.axisFontColor(t);var o=this.firstItemId-1;this.coords[this.sCharts[0]].map(function(t,e){if(r[++o]){var a=Math.round(n.startX-35+(e-1+n.startFraction)*n.spaceBetween);n.ctx.fillText(r[o],a,n.chart.startY+1.5*i)}}),this.ctx.restore()}},{key:"drawYAxis",value:function(t){var e,a,r,n=Math.round(14*+this.pixelRatio);if(this.ctx.lineWidth=1,this.ctx.font="300 ".concat(n,"px ").concat(this.colors.axisFontsList),this.ctx.strokeStyle=this.colors.axisLinesColor,this.an.animChart<100){var i=this.newMaxValueY>this.maxValueY?1:-1;"fadeOut"===t&&(e=this.chart.startY+i*(1-this.an.animChart/100)*this.chart.height*.5,a=this.prevAxisValue,r=this.an.animChart/100),"fadeIn"===t&&(e=this.chart.startY-i*(this.an.animChart/100)*this.chart.height*.5,r=1-this.an.animChart/100,a=this.newAxisValue)}else e=this.chart.startY,a=this.maxValueY,r=1;this.ctx.fillStyle=this.colors.axisFontColor(r);for(var o=1;o<=5;o++){var s=e-o*this.chart.height/5,h=a*o/5;this.ctx.fillText(h,this.chart.startX,s-.5*n),this.ctx.beginPath(),this.ctx.moveTo(this.chart.startX,s),this.ctx.lineTo(this.chart.endX,s),this.ctx.stroke()}this.ctx.fillText(0,this.chart.startX,this.chart.startY-.5*n)}},{key:"drawHoverPoint",value:function(t,e){var a=this.ctx,r=t.x,n=t.y;a.beginPath(),a.strokeStyle=e,a.lineWidth=4,a.moveTo(r,n),a.arc(r,n,8,0,2*Math.PI,!1),a.stroke(),a.beginPath(),a.lineWidth=1,a.fillStyle=this.colors.bgColor,a.arc(r,n,6,0,2*Math.PI,!1),a.fill()}},{key:"drawHoverGrid",value:function(t){var e=this.ctx,a=this.chart;e.lineWidth=1,e.strokeStyle=this.colors.hoverLineColor,e.beginPath(),e.moveTo(t,a.startY),e.lineTo(t,a.endY),e.stroke()}},{key:"createTooltip",value:function(){this.tooltip=document.createElement("div"),this.tooltip.className="tooltip",this.tooltipDate=document.createElement("div"),this.tooltipDate.className="tooltip-date",this.tooltipInfo=document.createElement("div"),this.tooltipInfo.className="tooltip-info",this.tooltip.appendChild(this.tooltipDate),this.tooltip.appendChild(this.tooltipInfo),this.tooltip.style.backgroundColor=this.colors.tooltipBgColor,this.tooltip.style.color=this.colors.tooltipColor,this.tooltip.style.display="none",this.tooltip.style.mozBoxShadow=this.colors.tooltipShadow,this.tooltip.style.webkitBoxShadow=this.colors.tooltipShadow,this.tooltip.style.boxShadow=this.colors.tooltipShadow,this.container.appendChild(this.tooltip)}},{key:"showTooltip",value:function(){var s=this,h=this.hoverItem+this.firstItemId,t=Math.round(this.startX-60+(this.hoverItem-1+this.startFraction)*this.spaceBetween/this.pixelRatio),e=new Date(this.data.columns.x[h]),a=o[e.getDay()]+", "+i[e.getMonth()]+" "+e.getDate();this.tooltipDate.innerHTML=a,this.tooltipInfo.innerHTML="",this.sCharts.map(function(t){var e=s.data.columns[t][h],a=s.data.names[t],r=s.data.colors[t],n=document.createElement("div");n.style.color=r;var i=document.createElement("div");i.className="num",i.innerHTML=e;var o=document.createElement("div");o.className="label",o.innerHTML=a,n.appendChild(i),n.appendChild(o),s.tooltipInfo.appendChild(n)}),this.tooltip.style.display="block",this.tooltip.style.left="".concat(t,"px")}},{key:"hideTooltip",value:function(){this.tooltip.style.display="none"}},{key:"makeDatesObject",value:function(t,e){var a={};for(var r in t)+r%Math.pow(2,e)||(a[r]=t[r]);return a}},{key:"updateDatesObject",value:function(t,e,a){for(var r=(e-t).toFixed(5),n=Math.ceil(Object.keys(a).length*r);n>=this.dateItemsToShow+1||n<this.dateItemsToShow-2;)n>=this.dateItemsToShow+1&&(this.nthDate+=1),n<this.dateItemsToShow-2&&(this.nthDate-=1),this.newDates=this.makeDatesObject(this.allDates,this.nthDate),n=Math.ceil(Object.keys(this.newDates).length*r);this.dates||(this.dates=this.newDates)}}])&&main_chart_defineProperties(e.prototype,a),r&&main_chart_defineProperties(e,r),MainChart}();function nav_chart_typeof(t){return(nav_chart_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nav_chart_getPrototypeOf(t){return(nav_chart_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nav_chart_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nav_chart_setPrototypeOf(t,e){return(nav_chart_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var x=function(t){function NavChart(t){var e,a,r,n,i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,NavChart),a=this,r=nav_chart_getPrototypeOf(NavChart).call(this,t),e=!r||"object"!==nav_chart_typeof(r)&&"function"!=typeof r?nav_chart_assertThisInitialized(a):r,n=nav_chart_assertThisInitialized(e),o=function(){e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.calcAnimations(),e.sCharts.map(function(t){e.coords=e.calcChartData(e.data.columns[t],e.start,e.end),e.drawChart(e.coords,t,e.data.colors[t])}),(e.an.animFadeChart<100||e.an.animChart<100)&&requestAnimationFrame(function(){return e.update(e.start,e.end)})},(i="update")in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,e.lineWidth=3,e.start=0,e.end=1,e.diff=0,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nav_chart_setPrototypeOf(t,e)}(NavChart,s),NavChart}();function nav_chart_controls_typeof(t){return(nav_chart_controls_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nav_chart_controls_defineProperties(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nav_chart_controls_getPrototypeOf(t){return(nav_chart_controls_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nav_chart_controls_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nav_chart_controls_setPrototypeOf(t,e){return(nav_chart_controls_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nav_chart_controls_defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var g=function(t){function NavChartControls(t){var i,e,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,NavChartControls),e=this,a=nav_chart_controls_getPrototypeOf(NavChartControls).call(this,t),nav_chart_controls_defineProperty(nav_chart_controls_assertThisInitialized(i=!a||"object"!==nav_chart_controls_typeof(a)&&"function"!=typeof a?nav_chart_controls_assertThisInitialized(e):a),"update",function(){i.rect=i.canvas.getBoundingClientRect(),i.startX=i.chart.startX,i.startY=i.chart.startY,i.endX=i.chart.endX,i.endY=i.chart.endY,i.startPos=i.startBarPos*i.chart.width,i.endPos=i.endBarPos*i.chart.width,i.ctx.clearRect(0,0,i.canvas.width,i.canvas.height),i.drawNavOverlay(),i.controlledChart.onNavChange(i.startBarPos,i.endBarPos)}),nav_chart_controls_defineProperty(nav_chart_controls_assertThisInitialized(i),"onMove",function(t){t.preventDefault();var e=t.touches?t.touches[0].pageX:t.x,a=t.touches?t.touches[0].pageY:t.y;if(i.mouse.x=e-i.rect.left-i.chart.startX,i.mouse.y=a+i.rect.top+i.endY-i.chart.startY,i.isHoverSlider(i.mouse.x),i.mouse.click){var r=i.mouse.x/i.chart.width;switch(i.mouse.click){case"startBarPos":if(r<0||1<r||r>i.endBarPos-i.minBarSize)return;i.startBarPos=r,requestAnimationFrame(function(){return i.update()});break;case"endBarPos":if(r<0||1<r||r<i.startBarPos+i.minBarSize)return;i.endBarPos=r,requestAnimationFrame(function(){return i.update()});break;case"centerBarPos":var n=i.centerClickOffsetX-r;if(i.startBarPos-n<0||1<i.endBarPos-n)return;i.startBarPos-=n,i.endBarPos-=n,i.centerClickOffsetX=r,requestAnimationFrame(function(){return i.update()})}}}),nav_chart_controls_defineProperty(nav_chart_controls_assertThisInitialized(i),"onDown",function(t){t.preventDefault();var e=t.touches?t.touches[0].pageX:t.x;i.mouse.x=e-i.rect.left-i.chart.startX,i.isHoverSlider(i.mouse.x),i.mouse.hover&&(i.mouse.click=i.mouse.hover,"centerBarPos"===i.mouse.hover&&(i.centerClickOffsetX=i.mouse.x/i.chart.width))}),nav_chart_controls_defineProperty(nav_chart_controls_assertThisInitialized(i),"onUp",function(t){t.preventDefault(),i.mouse.click=!1}),nav_chart_controls_defineProperty(nav_chart_controls_assertThisInitialized(i),"onLeave",function(){document.body.style.cursor="auto",i.mouse.click=!1,i.mouse.hover=!1}),i.controlledChart=t.controlledChart,i.startBarPos=t.start,i.endBarPos=t.end,i.barWidth=6,i.mouse={x:void 0,y:void 0,hover:null,click:null},i.minBarSize=.1,i.clickedOnStartBar=!1,i.clickedOnEndBar=!1,i.clickedOnCenterBar=!1,i.pixelRatio=1,i}var e,a,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nav_chart_controls_setPrototypeOf(t,e)}(NavChartControls,s),e=NavChartControls,(a=[{key:"drawNavOverlay",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var t=this.startBarPos*this.chart.width+this.startX,e=this.endBarPos*this.chart.width+this.chart.startX;this.drawBoundingArea(Math.round(t),Math.round(e)),this.drawSlider(Math.round(t),Math.round(e))}},{key:"drawSlider",value:function(t,e){this.ctx.fillStyle=this.colors.sliderColor,this.ctx.fillRect(t,0,this.barWidth,this.startY),this.ctx.fillRect(e-2,0,this.barWidth,this.startY),this.ctx.fillRect(t+this.barWidth,0,e-t-this.barWidth-2,2),this.ctx.fillRect(t+this.barWidth,this.startY,e-t-this.barWidth-2,-2)}},{key:"drawBoundingArea",value:function(t,e){this.ctx.fillStyle=this.colors.navOverlayColor,this.ctx.fillRect(this.startX-1,0,t-this.startX+1,this.startY),this.ctx.fillRect(e+2,0,this.endX-e,this.startY)}},{key:"isHoverSlider",value:function(t){return this.mouse.y<0&&this.mouse.y>this.startY?(this.mouse.hover&&(document.body.style.cursor="auto"),this.mouse.hover=null,!1):0<t&&t<this.startPos-7&&t>this.endPos+this.barWidth+10&&t<this.endX?(this.mouse.hover="outOfSlidebar",document.body.style.cursor="col-resize",!0):t>this.startPos-7&&t<this.startPos+this.barWidth+10?(this.mouse.hover="startBarPos",document.body.style.cursor="col-resize",!0):t>this.endPos-7&&t<this.endPos+this.barWidth+10?(this.mouse.hover="endBarPos",document.body.style.cursor="col-resize",!0):t>=this.startPos+this.barWidth+10&&t<=this.endPos-7?(this.mouse.hover="centerBarPos",document.body.style.cursor="all-scroll",!0):(document.body.style.cursor="auto",this.mouse.hover=!1)}}])&&nav_chart_controls_defineProperties(e.prototype,a),r&&nav_chart_controls_defineProperties(e,r),NavChartControls}();var O=function(t){return document.createElement(t)},h=function createChartApp(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,createChartApp);var o=t.data,e=t.appContainer,a=t.title||"Chart",r=o.names,n=t.start||.55,i=t.end||.9,s=!1,h=O("div");h.id=a;var c=O("h2");c.innerHTML=a;var l=O("div");l.id="main_chart_container";var u=O("div");u.id="nav_chart_container",h.appendChild(c),h.appendChild(l),h.appendChild(u);var d=O("div");d.id="controls",d.style.borderColor="#e6ecf0";var p=[];for(var f in r){var v=createCheckbox(f);d.appendChild(v)}function createCheckbox(t){var e=O("div"),a=O("input");a.addEventListener("change",onCheckboxChange),a.type="checkbox",a.id=t,a.checked="true";var r=document.createTextNode(o.names[t]),n=O("label");n.htmlFor=t;var i=O("span");return i.style.borderColor=o.colors[t],O("i").innerHTML=t,n.appendChild(i),n.appendChild(r),e.appendChild(a),e.appendChild(n),p.push(t),e}h.appendChild(d);var m=O("div"),y=O("button");m.className="nightmode_switch",y.className="nightmode_button",y.innerHTML="Switch to Night Mode",y.addEventListener("click",function(t){t.preventDefault();var e=(s=!s)?"Switch to Day Mode":"Switch to Night Mode",a=s?"#344658":"#e6ecf0",r=s?"#242F3E":"#FFFFFF",n=s?"#FFFFFF":"#222222";y.innerHTML=e,h.style.backgroundColor=r,h.style.color=n,d.style.borderColor=a,_.switchNightMode(s),C.switchNightMode(s)}),m.appendChild(y),h.appendChild(m);var _=new w({name:"main_chart",container:l,appContainer:h,title:a,data:o,start:n,end:i,selectedCharts:p,ratio:.65}),b=new x({name:"nav_chart",container:u,appContainer:h,title:a,data:o,selectedCharts:p,ratio:.15}),C=new g({name:"nav_chart_controls",container:u,appContainer:h,title:a,data:[],selectedCharts:p,start:n,end:i,ratio:.15,controlledChart:_});function onCheckboxChange(t){var e=t.target,a=e.checked,r=e.id;console.log(_),_.updateSelectedCharts(a,r),b.updateSelectedCharts(a,r)}e.appendChild(h),_.setup(d),b.setup(d),C.setup(d),window.addEventListener("resize",function(){_.resize(),C.resize(),b.resize()})};var c,l=document.getElementById("app");function selectChart(t){var e=+t.target.value;if(null!==e){for(;l.firstChild;)l.removeChild(l.firstChild);document.body.style.backgroundColor="#FFFFFF",document.body.style.color="#222222",new h({title:"Chart #"+(e+1),data:c[e],appContainer:l})}}window.addEventListener("DOMContentLoaded",function(){var e=new XMLHttpRequest;e.overrideMimeType("application/json"),e.open("GET","./chart_data.json",!0),e.onload=function(){var t;t=JSON.parse(e.responseText),function(t){l.children[0];var e=document.createElement("div");e.className="charts-selector";var r=document.createElement("select");r.addEventListener("change",selectChart);var a=document.createElement("option");a.value=null,a.innerHTML="Select chart...",r.appendChild(a),t.map(function(t,e){var a=document.createElement("option");a.value=e,a.innerHTML="Chart #"+(e+1),r.appendChild(a)}),e.appendChild(r),document.body.prepend(e)}(c=t.map(function(t){var e=function(n){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,a,r;e=n,r=i[a=t],a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r})}return n}({},t,{columns:{}}),a=!0,r=!1,n=void 0;try{for(var i,o=t.columns[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value,h=s[0];s.shift(),e.columns[h]=s}}catch(t){r=!0,n=t}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return e})),new h({title:"Chart #1",data:c[0],appContainer:l})},e.send()}),function(){for(var i=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var a=(new Date).getTime(),r=Math.max(0,16-(a-i)),n=window.setTimeout(function(){t(a+r)},r);return i=a+r,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}()}]);