!function(t){var e={};function a(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";a.r(e);var n="#3CC23F",i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=[{date:"12-01-2018",joined:134,left:13},{date:"12-02-2018",joined:45,left:32},{date:"12-03-2018",joined:12,left:23},{date:"12-04-2018",joined:150,left:41},{date:"12-05-2018",joined:230,left:10},{date:"12-06-2018",joined:134,left:45},{date:"12-07-2018",joined:87,left:12},{date:"12-08-2018",joined:129,left:76}];function o(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var h=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,"setup",function(){e.chart={},e.canvas=document.createElement("canvas"),e.canvas.addEventListener("mousemove",e.onMouseMove),e.canvas.id="main_chart",document.getElementById("app").appendChild(e.canvas),e.canvas.style="\n            width: 100%;\n            height: 50%;\n        ",e.ctx=e.canvas.getContext("2d"),e.resize(),e.fix_dpi(),e.maxJoinedNum=e.showJoined?e.maxBy(r,"joined").joined:0,e.maxLeftNum=showLeft?maxBy(r,"left").left:0,maxNum=Math.max(maxJoinedNum,maxLeftNum),maxValueY=getYAxisMaxValue(maxNum),totalValues=r.length,currentItemsPositions=getItemsPositions(),drawGridLines(),drawDatesLegend(r),showJoined&&drawChart(r,n),showLeft&&drawChart(r,n),drawAxis(r)}),c(this,"onMouseMove",function(t){var a=t.x,n=t.y,i=e.chart,r=e.canvas.getBoundingClientRect(),o=a-Math.round(r.left),c=n-Math.round(r.top);c<i.maxH&&c>i.minH&&o>i.minW&&o<i.maxW&&(hoverItem=findClosestItem(o),requestAnimationFrame(update))})}var e,a,h;return e=t,(a=[{key:"fix_dpi",value:function(){console.log(this.canvas);var t={height:function(){return+getComputedStyle(this.canvas).getPropertyValue("height").slice(0,-2)},width:function(){return+getComputedStyle(this.canvas).getPropertyValue("width").slice(0,-2)}};this.canvas.setAttribute("width",t.width()*dpi),this.canvas.setAttribute("height",t.height()*dpi),this.ctx.scale(dpi,dpi)}},{key:"update",value:function(){maxJoinedNum=showJoined?maxBy(r,"joined").joined:0,maxLeftNum=showLeft?maxBy(r,"left").left:0,maxNum=Math.max(maxJoinedNum,maxLeftNum),0!==maxNum&&(console.log(maxNum),maxValueY=getYAxisMaxValue(maxNum),totalValues=r.length,currentItemsPositions=getItemsPositions(),ctx.clearRect(0,0,canvas.width,canvas.height),drawGridLines(),drawDatesLegend(r),showJoined&&drawChart(r,"joined",n),showLeft&&drawChart(r,"left","#F34C44"),drawAxis(r),hoverItem&&drawHoverGrid())}},{key:"resize",value:function(){var t=window,e=t.innerWidth,a=t.innerHeight;this.canvas.width=e,this.canvas.height=a*this.dpi,this.chart.minW=Math.round(.05*e),this.chart.maxW=Math.round(.95*e),this.chart.minH=Math.round(.05*a),this.chart.maxH=Math.round(.95*a),this.chart.width=e,this.chart.height=a,this.fix_dpi(),requestAnimationFrame(this.update)}},{key:"maxBy",value:function(t,e){var a=t.reduce(function(t,a,n,i){return a[e]>i[t][e]?n:t},0);return console.log(t[a]),t[a]}},{key:"getItemsPositions",value:function(){var t=[];t[0]=chart.minW;for(var e=Math.round(chart.width/totalValues),a=1;a<totalValues;a++)t[a]=t[a-1]+e;return t}},{key:"findClosestItem",value:function(t){return currentItemsPositions.map(function(e){return Math.abs(e-t)}).reduce(function(t,e,a,n){return e<n[t]?a:t},0)}},{key:"getYAxisMaxValue",value:function(t){var e=Math.max(10,Math.pow(10,t.toString().length-1)),a=Math.ceil(t/e)*e;return Math.max(a,Math.round(t/e)*e)}},{key:"drawAxis",value:function(){ctx.lineWidth=1,ctx.beginPath(),ctx.moveTo(chart.minW,chart.maxH),ctx.lineTo(chart.maxW,chart.maxH),ctx.strokeStyle="#ECF0F3",ctx.stroke()}},{key:"drawDatesLegend",value:function(t){ctx.font="".concat(.03*chart.height,"px -apple-system"),ctx.fillStyle="#96A2AA",t.map(function(t,e){var a=chart.minW+e*chart.width/totalValues,n=new Date(t.date),r=i[n.getMonth()]+" "+n.getDate();ctx.fillText(r,a,chart.maxH+.03*chart.height)})}},{key:"drawGridLines",value:function(){ctx.font="".concat(.03*chart.height,"px -apple-system"),ctx.strokeStyle="#ECF0F3",ctx.fillStyle="#96A2AA";for(var t=1;t<=5;t++){var e=chart.maxH-t*chart.height/5,a=maxValueY*t/5;ctx.fillText(a,chart.minW,e-.02*chart.height),ctx.beginPath(),ctx.moveTo(chart.minW,e),ctx.lineTo(chart.maxW,e),ctx.stroke()}ctx.fillText(0,chart.minW,chart.maxH-.02*chart.height)}},{key:"drawChart",value:function(t,e,a){ctx.beginPath(),ctx.moveTo(chart.minW,chart.maxH),t.map(function(t,n){var i=chart.height-(t[e]/maxValueY*chart.height+chart.minH),r=chart.minW+n/totalValues*chart.width;0===n?ctx.moveTo(r,i):ctx.lineTo(r,i),hoverItem&&hoverItem===n&&drawHoverPoint(r,i,a)}),ctx.lineCap="round",ctx.strokeStyle=a,ctx.lineWidth=3,ctx.stroke()}},{key:"drawHoverPoint",value:function(t,e,a){ctx.closePath(),ctx.beginPath(),ctx.arc(t,e,5,0,2*Math.PI,!1),ctx.closePath(),ctx.strokeStyle="#FFFFFF",ctx.beginPath(),ctx.arc(t,e,2,0,2*Math.PI,!1),ctx.moveTo(t,e),ctx.strokeStyle=a}},{key:"drawHoverGrid",value:function(){var t=chart.minW+hoverItem/totalValues*chart.width;ctx.lineWidth=1,ctx.strokeStyle="#DFE6EB",ctx.beginPath(),ctx.moveTo(t,chart.maxH),ctx.lineTo(t,chart.minH),ctx.stroke()}}])&&o(e.prototype,a),h&&o(e,h),t}(),u=(window.devicePixelRatio,new h),l=document.querySelectorAll("input[type=checkbox]");function d(t){"joined_checkbox"===t.target.name?t.target.checked:t.target.checked,update()}l.forEach(function(t){t.addEventListener("change",d)}),l[0].checked,l[1].checked,window.addEventListener("load",u.setup),window.addEventListener("resize",u.resize)}]);